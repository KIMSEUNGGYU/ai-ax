# ai-ax v0.3 Architecture

## 레포 전체 구조

```mermaid
graph TB
    subgraph REPO["ai-ax (Marketplace)"]
        MKT[".claude-plugin/marketplace.json"]

        subgraph FEW["fe-workflow v0.3 (등록됨)"]
            direction TB
            FEW_META[".claude-plugin/plugin.json"]
            FEW_SK["skills/fe-principles"]
            FEW_CMD["commands/ x6"]
            FEW_AGT["agents/ x2"]
            FEW_CONV["conventions/ x4"]
        end

        subgraph MR["mini-review (미등록, 학습용)"]
            direction TB
            MR_META[".claude-plugin/plugin.json"]
            MR_SK["skills/review-criteria"]
            MR_CMD["commands/review"]
            MR_AGT["agents/code-reviewer"]
            MR_HK["hooks/hooks.json"]
        end

        subgraph DOCS["설계/학습 문서"]
            direction TB
            GYU[".gyu/ (사용자 소유)"]
            AI[".ai/ (Claude 소유)"]
        end
    end

    MKT -->|"등록"| FEW
    MKT -.->|"미등록"| MR

    style MKT fill:#3b82f6,color:#fff
    style FEW_META fill:#64748b,color:#fff
    style FEW_SK fill:#8b5cf6,color:#fff
    style FEW_CMD fill:#06b6d4,color:#fff
    style FEW_AGT fill:#ec4899,color:#fff
    style FEW_CONV fill:#f59e0b,color:#fff
    style MR_META fill:#64748b,color:#fff
    style MR_SK fill:#8b5cf6,color:#fff
    style MR_CMD fill:#06b6d4,color:#fff
    style MR_AGT fill:#ec4899,color:#fff
    style MR_HK fill:#22c55e,color:#fff
    style GYU fill:#a3a3a3,color:#fff
    style AI fill:#a3a3a3,color:#fff
```

## fe-workflow v0.3 상세

```mermaid
graph TB
    subgraph CC["Claude Code"]
        USER["사용자"]
    end

    subgraph PLUGIN["fe-workflow v0.3"]
        subgraph SKILLS["Skill (자동 적용)"]
            S1["fe-principles<br/>코드 원칙 요약 자동 주입"]
        end

        subgraph COMMANDS["Commands (사용자 호출)"]
            C1["/architecture"]
            C2["/review"]
            C3["/pr"]
            C4["/_pr (회사용)"]
            C5["/recap"]
            C6["/organization"]
        end

        subgraph AGENTS["Agents (위임 실행)"]
            A1["architect<br/>opus 모델, 3-Step 설계"]
            A2["code-reviewer<br/>리뷰 + 점수"]
        end

        subgraph CONV["conventions/ (SSOT)"]
            CV1["code-principles.md"]
            CV2["folder-structure.md"]
            CV3["api-layer.md"]
            CV4["error-handling.md"]
        end
    end

    USER -->|"코드 작성"| S1
    USER -->|"/command"| COMMANDS
    C1 -->|"위임"| A1
    C2 -->|"위임"| A2
    S1 -.->|"참조"| CONV
    A1 -.->|"참조"| CONV
    A2 -.->|"참조"| CONV

    style S1 fill:#8b5cf6,color:#fff
    style C1 fill:#06b6d4,color:#fff
    style C2 fill:#06b6d4,color:#fff
    style C3 fill:#06b6d4,color:#fff
    style C4 fill:#06b6d4,color:#fff
    style C5 fill:#06b6d4,color:#fff
    style C6 fill:#06b6d4,color:#fff
    style A1 fill:#ec4899,color:#fff
    style A2 fill:#ec4899,color:#fff
    style CV1 fill:#f59e0b,color:#fff
    style CV2 fill:#f59e0b,color:#fff
    style CV3 fill:#f59e0b,color:#fff
    style CV4 fill:#f59e0b,color:#fff
    style USER fill:#7c3aed,color:#fff
```

## 워크플로우

```mermaid
flowchart LR
    A["/architecture<br/>설계"] --> B["구현<br/>(fe-principles 자동)"] --> C["/review<br/>코드 리뷰"] --> D["/pr 또는 /_pr<br/>PR 생성"]
    D --> E["/recap<br/>작업 정리"]
    E --> F["/organization<br/>세션 종료"]

    style A fill:#06b6d4,color:#fff
    style B fill:#8b5cf6,color:#fff
    style C fill:#06b6d4,color:#fff
    style D fill:#06b6d4,color:#fff
    style E fill:#06b6d4,color:#fff
    style F fill:#06b6d4,color:#fff
```

## 파일 구조

```
ai-ax/
├── .claude-plugin/
│   └── marketplace.json           ← 마켓플레이스 등록 (fe-workflow만)
├── .claude/
│   ├── settings.json              ← hooks 설정
│   └── settings.local.json        ← 권한 설정
├── .gyu/                          ← 사용자 소유 (설계/학습 문서)
├── .ai/                           ← Claude 소유 (세션 상태)
│
├── fe-workflow/                   ← 메인 플러그인 v0.3
│   ├── .claude-plugin/plugin.json
│   ├── skills/fe-principles/      ← Skill x1
│   ├── commands/                  ← Command x6
│   │   ├── architecture.md
│   │   ├── review.md
│   │   ├── pr.md
│   │   ├── _pr.md (회사용)
│   │   ├── recap.md
│   │   └── organization.md
│   ├── agents/                    ← Agent x2
│   │   ├── architect.md
│   │   └── code-reviewer.md
│   └── conventions/               ← Convention x4 (SSOT)
│       ├── code-principles.md
│       ├── folder-structure.md
│       ├── api-layer.md
│       └── error-handling.md
│
└── mini-review/                   ← 학습용 (마켓플레이스 미등록)
```

## 범례

| 색상 | 컴포넌트 |
|------|----------|
| 보라 | Skill (자동 적용) |
| 파랑 | Command (사용자 호출) |
| 핑크 | Agent (위임 실행) |
| 노랑 | Convention (지식 소스) |
| 초록 | Hook (이벤트 기반) |
| 회색 | 메타/문서 |
